using System;
using System.IO;

using Microsoft.Exchange.WebServices.Data;

namespace Microsoft.Exchange.WebServices.Authentication
{
	public class TraceListener : ITraceListener
	{
		public void Trace(string traceType, string traceMessage)
		{
			CreateXMLTextFile(traceType, traceMessage);
		}

		private void CreateXMLTextFile(string fileName, string traceContent)
		{
			try
			{
				if (!Directory.Exists(@"..\\TraceOutput"))
				{
					Directory.CreateDirectory(@"..\\TraceOutput");
				}

<<<<<<< local
        System.IO.File.AppendAllText(@"..\\TraceOutput\\" + fileName + ".txt", string.Format("<{0}>\n",traceContent));
      }
      catch (IOException ex)
      {
        Console.WriteLine(ex.Message);
      }
    }
  }
=======
				//        System.IO.File.WriteAllText(@"..\\TraceOutput\\" + fileName + DateTime.Now.Ticks + ".txt", traceContent);
				System.IO.File.AppendAllText(@"..\\TraceOutput\\" + fileName + "_" + Environment.UserName + "_"+ 
				                             DateTime.Today.ToString("d-MMM-yyyy") + ".txt", 
				                             string.Format("{0}:  {1}\r\n",DateTime.Now.ToString("HH:mm:ss.ffffzzz"), traceContent));
			}
			catch (IOException ex)
			{
				Console.WriteLine(ex.Message);
			}
		}
	}
>>>>>>> other
}
